<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reporting API</title>
  </head>
  <body>
    <form id="payment-form">
      <label for="xKey">Cardknox Key:</label>
      <input type="text" id="xKey" name="xKey" />
      <div id="reportFields" style="display: none">
        <label for="xBeginDate">Begin Date:</label>
        <input type="date" id="xBeginDate" name="xBeginDate" />
        <label for="xEndDate">End Date:</label>
        <input type="date" id="xEndDate" name="xEndDate" />
      </div>
      <div class="ccFieldsForm paymentInfo">
        <label for="xAmount">Amount:</label>
        <input type="text" id="xAmount" name="xAmount" />
      </div>
      <button type="submit">Submit</button>
    </form>
    <% if (typeof xAuthCode !== 'undefined') { %>
    <table id="response-table">
      <tr>
        <th>xCommand</th>
        <th>xAmount</th>
        <th>xCardType</th>
        <th>xBeginDate</th>
        <th>xEndDate</th>
        <th>xCardLastFour</th>
        <th>xRefNum</th>
      </tr>

      <% try { %> <% data.forEach(function(item) { %>
      <tr>
        <td><%= item.xCommand %></td>
        <td><%= item.xAmount %></td>
        <td><%= item.xCardType %></td>
        <td><%= item.xBeginDate %></td>
        <td><%= item.xEndDate %></td>
        <td><%= item.xCardLastFour %></td>
        <td><%= item.xRefNum %></td>
      </tr>
    </table>
    <% }); %> <% } catch (error) { %>
    <div id="error-message">Error: <%= error.message %></div>
    <% } %>
  </body>
</html>
